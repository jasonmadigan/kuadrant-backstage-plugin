{{ template "header.html" . }}

<div class="theme-panel">
  <h2 class="theme-heading">Log in to Your Account</h2>
  <p style="text-align: center; color: #666; margin-bottom: 20px; font-size: 14px;">Kuadrant Local Development</p>
  <form method="post" action="{{ .PostURL }}">
    <div class="theme-form-row">
      <div class="theme-form-label">
        <label for="userid">{{ .UsernamePrompt }}</label>
      </div>
	  <input tabindex="1" required id="login" name="login" type="text" class="theme-form-input" placeholder="{{ .UsernamePrompt | lower }}" value="{{ if .Username }}{{ .Username }}{{ else }}admin@kuadrant.local{{ end }}" autofocus />
    </div>
    <div class="theme-form-row">
      <div class="theme-form-label">
        <label for="password">Password</label>
      </div>
	  <input tabindex="2" required id="password" name="password" type="password" class="theme-form-input" placeholder="password" value="admin" {{ if .Invalid }} autofocus {{ end }}/>
    </div>

    {{ if .Invalid }}
      <div id="login-error" class="dex-error-box">
        Invalid {{ .UsernamePrompt }} and password.
      </div>
    {{ end }}

    <button tabindex="3" id="submit-login" type="submit" class="dex-btn theme-btn--primary">Login</button>

  </form>
  {{ if .BackLink }}
  <div class="theme-link-back">
    <a class="dex-subtle-text" href="{{ .BackLink }}">Select another login method.</a>
  </div>
  {{ end }}

  <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 6px; border-left: 4px solid #4a90e2;">
    <h3 style="font-size: 13px; color: #333; margin-bottom: 12px; font-weight: 600;">Quick Login (Development)</h3>
    <div style="display: grid; gap: 8px;">
      <button type="button" data-testid="quick-login-owner1" onclick="loginAs('owner1@kuadrant.local', 'owner1')" style="display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; background: white; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; transition: all 0.2s; font-size: 12px;">
        <span style="font-weight: 500; color: #333;">owner1@kuadrant.local</span>
        <span style="padding: 3px 8px; background: #e3f2fd; color: #1976d2; border-radius: 10px; font-size: 10px; font-weight: 500;">Owner</span>
      </button>
      <button type="button" data-testid="quick-login-owner2" onclick="loginAs('owner2@kuadrant.local', 'owner2')" style="display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; background: white; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; transition: all 0.2s; font-size: 12px;">
        <span style="font-weight: 500; color: #333;">owner2@kuadrant.local</span>
        <span style="padding: 3px 8px; background: #e3f2fd; color: #1976d2; border-radius: 10px; font-size: 10px; font-weight: 500;">Owner</span>
      </button>
      <button type="button" data-testid="quick-login-consumer1" onclick="loginAs('consumer1@kuadrant.local', 'consumer1')" style="display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; background: white; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; transition: all 0.2s; font-size: 12px;">
        <span style="font-weight: 500; color: #333;">consumer1@kuadrant.local</span>
        <span style="padding: 3px 8px; background: #e8f5e9; color: #2e7d32; border-radius: 10px; font-size: 10px; font-weight: 500;">Consumer</span>
      </button>
      <button type="button" data-testid="quick-login-consumer2" onclick="loginAs('consumer2@kuadrant.local', 'consumer2')" style="display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; background: white; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; transition: all 0.2s; font-size: 12px;">
        <span style="font-weight: 500; color: #333;">consumer2@kuadrant.local</span>
        <span style="padding: 3px 8px; background: #e8f5e9; color: #2e7d32; border-radius: 10px; font-size: 10px; font-weight: 500;">Consumer</span>
      </button>
      <button type="button" data-testid="quick-login-admin" onclick="loginAs('admin@kuadrant.local', 'admin')" style="display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; background: white; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; transition: all 0.2s; font-size: 12px;">
        <span style="font-weight: 500; color: #333;">admin@kuadrant.local</span>
        <span style="padding: 3px 8px; background: #f3e5f5; color: #7b1fa2; border-radius: 10px; font-size: 10px; font-weight: 500;">Admin</span>
      </button>
    </div>
  </div>
</div>


<script type="text/javascript">
  function loginAs(email, password) {
    document.getElementById('login').value = email;
    document.getElementById('password').value = password;
    document.querySelector('form').submit();
  }

  document.querySelector('form').onsubmit = function(e) {
    var el = document.querySelector('#submit-login');
    el.setAttribute('disabled', 'disabled');
  };

  // add hover effects to quick login buttons
  var buttons = document.querySelectorAll('[onclick^="loginAs"]');
  buttons.forEach(function(btn) {
    btn.addEventListener('mouseenter', function() {
      this.style.background = '#f0f7ff';
      this.style.borderColor = '#4a90e2';
      this.style.transform = 'translateX(4px)';
    });
    btn.addEventListener('mouseleave', function() {
      this.style.background = 'white';
      this.style.borderColor = '#ddd';
      this.style.transform = 'translateX(0)';
    });
  });
</script>

{{ template "footer.html" . }}
